webpackJsonp([10],{"2Ich":function(e,t){},PxKD:function(e,t){},Y0rD:function(e,t){},g9JB:function(e,t){},szpa:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("mvHQ"),l=a.n(o),s=a("woOf"),r=a.n(s),i={components:{},props:{isAdd:{type:Boolean,default:!0},isShow:{type:Boolean,default:!1},rowData:{type:Object,default:function(){}}},data:function(){return{radio:0,accountRoleOptions:[{typeStr:0,typeName:"超级管理员",desc:"有且仅有一个，拥有一切权限"},{typeStr:1,typeName:"系统操作员",desc:"浏览一切权限"},{typeStr:2,typeName:"运营管理员",desc:"运营者一切权限"},{typeStr:3,typeName:"普通操作员",desc:"浏览运营权限"}],operatorOptions:[],cityOptions:[],areaOptions:[],isCurrentShow:!1,labelPosition:"right",formLabelAlign:{operatorId:null,userId:null,roleId:null,userName:null,password:null,loginId:null},rules:{operatorId:[{required:!0,message:"运营商不能为空",trigger:"change"}],password:[{required:!0,message:"密码不能为空",trigger:"change"}],loginId:[{required:!0,message:"账号不能为空",trigger:"change"}],userName:[{required:!0,message:"用户名不能为空",trigger:"change"}],roleId:[{required:!0,message:"角色不能为空",trigger:"change"}]}}},created:function(){},mounted:function(){this.operatorOptions=this.$store.state.home.operatorArr},methods:{onClickCancel:function(){this.$emit("onCancel")},onClickConfirm:function(){console.log(this.formLabelAlign);var e={loginId:this.formLabelAlign.loginId,roleId:this.formLabelAlign.roleId,userId:this.formLabelAlign.userId,userName:this.formLabelAlign.userName,password:this.formLabelAlign.password,operatorId:this.formLabelAlign.operatorId};r()(e,this.formLabelAlign),console.log(e),e=this.$common.deleteEmptyString(e,!0),this.formLabelAlign.id?this.updateAuthorityAccount(e):this.addAuthorityAccount(e)},updateAuthorityAccount:function(e){var t=this;this.$userAjax.updateUserList(e).then(function(e){e.data.success?(t.$emit("onCancel",!0),t.$message.success("修改成功")):t.$message.warning(e.data.errMsg)}).catch(function(){})},addAuthorityAccount:function(e){var t=this;this.$userAjax.addAdminUser(e).then(function(e){e.data.success?(t.$emit("onCancel",!0),t.$message.success("新增成功")):t.$message.warning(e.data.errMsg)}).catch(function(){})},operatorChangeAct:function(){var e=this;this.$deviceAjax.getCityByoperatorId({operatorId:this.formLabelAlign.operatorId}).then(function(t){t.data.success?(e.cityOptions=t.data.model,e.formLabelAlign.password=e.cityOptions[0].password,e.formLabelAlign.areaId=null):e.$message({type:"warning",message:t.data.errMsg})}).catch(function(){})},cityChangeAct:function(){var e=this;this.$deviceAjax.getAreaListBypassword({password:this.formLabelAlign.password}).then(function(t){t.data.success?(e.areaOptions=t.data.model,e.formLabelAlign.areaId=e.areaOptions[0].areaId):e.$message({type:"warning",message:t.data.errMsg})}).catch(function(){})}},watch:{isShow:function(e){this.isCurrentShow=e},rowData:function(e){this.formLabelAlign=JSON.parse(l()(e)),console.log("formLabelAlign",this.formLabelAlign),this.cityOptions=e.cityList,this.areaOptions=e.areaList}},destroyed:function(){}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-account-edit",attrs:{width:"480px",title:e.formLabelAlign.id?"修改账号":"新增账号",center:"",visible:e.isCurrentShow,"before-close":e.onClickCancel,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isCurrentShow=t}}},[a("div",{staticClass:"dialog-content"},[a("el-form",{ref:"addHouseForm",staticClass:"info-form",attrs:{rules:e.rules,"label-position":e.labelPosition,"label-width":"120px",model:e.formLabelAlign}},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-form-item",{attrs:{label:"运营商：",prop:"operatorId"}},[a("el-select",{staticClass:"time-interal",attrs:{size:"small",clearable:"",placeholder:"请选择运营商"},model:{value:e.formLabelAlign.operatorId,callback:function(t){e.$set(e.formLabelAlign,"operatorId",t)},expression:"formLabelAlign.operatorId"}},e._l(e.operatorOptions,function(e){return a("el-option",{key:e.operatorId,attrs:{label:e.operatorName,value:e.operatorId}})}),1)],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-form-item",{attrs:{label:"用户名：",prop:"userName"}},[a("el-input",{staticStyle:{width:"auto"},attrs:{clearable:""},model:{value:e.formLabelAlign.userName,callback:function(t){e.$set(e.formLabelAlign,"userName",t)},expression:"formLabelAlign.userName"}})],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-form-item",{attrs:{label:"账号：",prop:"loginId"}},[a("el-input",{staticStyle:{width:"auto"},attrs:{clearable:""},model:{value:e.formLabelAlign.loginId,callback:function(t){e.$set(e.formLabelAlign,"loginId",t)},expression:"formLabelAlign.loginId"}})],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-form-item",{attrs:{label:"密码：",prop:"password"}},[a("el-input",{staticStyle:{width:"auto"},attrs:{clearable:""},model:{value:e.formLabelAlign.password,callback:function(t){e.$set(e.formLabelAlign,"password",t)},expression:"formLabelAlign.password"}})],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-form-item",{attrs:{label:"企业用户："}},[a("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1)],1),e._v(" "),e.radio?a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-form-item",{attrs:{label:"企业名称：",prop:"userName"}},[a("el-select",{staticClass:"time-interal",attrs:{size:"small",clearable:"",placeholder:"请选择企业名称"},on:{change:e.cityChangeAct},model:{value:e.formLabelAlign.userId,callback:function(t){e.$set(e.formLabelAlign,"userId",t)},expression:"formLabelAlign.userId"}},e._l(e.cityOptions,function(e){return a("el-option",{key:e.userId,attrs:{label:e.cityName,value:e.userId}})}),1)],1)],1):e._e(),e._v(" "),e.radio?e._e():a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-form-item",{attrs:{label:"权限：",prop:"roleId"}},[a("el-select",{staticClass:"time-interal",attrs:{size:"small",clearable:"",placeholder:"请选择权限"},model:{value:e.formLabelAlign.roleId,callback:function(t){e.$set(e.formLabelAlign,"roleId",t)},expression:"formLabelAlign.roleId"}},e._l(e.accountRoleOptions,function(e){return a("el-option",{key:e.typeStr,attrs:{label:e.typeName,value:e.typeStr}})}),1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onClickConfirm}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onClickCancel}},[e._v("取消")])],1)])},staticRenderFns:[]};var c={components:{AuthorityAccountAdd:a("VU/8")(i,n,!1,function(e){a("PxKD"),a("g9JB")},"data-v-543d1e5f",null).exports},mounted:function(){this.operatorOptions=this.$store.state.home.operatorArr,this.csOptions=this.$store.state.home.chargeStationArr,this.beginTime=this.$common.getSpaceDate(-30)+" 00:00:00",this.endTime=this.$common.getCurrentTime(),this.csOptions=this.$store.state.home.operatorId,this.initData()},data:function(){return{rowData:{},isShowAddDialog:!1,pageSizeArr:window.config.pageSizeArr,accountRoleOptions:[{typeStr:0,typeName:"超级管理员",desc:"有且仅有一个，拥有一切权限"},{typeStr:1,typeName:"系统操作员",desc:"浏览该平台下的一切数据权限"},{typeStr:2,typeName:"运营管理员",desc:"当前运营商及其子运营商的一切权限"},{typeStr:3,typeName:"普通操作员",desc:"浏览运营商及其子运营商的数据权限"}],pageSize:10,currentPage:1,total:10,beginTime:null,endTime:null,operatorOptions:[],csName:null,userName:null,csOptions:[],operator:null,roleId:null,mainScreenLoading:!1,tableData:window.config.tableData}},methods:{transferRoleDesc:function(e){for(var t=0;t<this.accountRoleOptions.length;t++){var a=this.accountRoleOptions[t];if(a.typeStr===e.roleId)return a.desc}return""},initData:function(){var e=this,t={model:{roleId:this.roleId,userName:this.userName,operatorId:this.operator},pageIndex:this.currentPage,pageSize:this.pageSize,queryCount:!0,start:0};t=this.$common.deleteEmptyString(t,!0),this.$userAjax.getAccountUserList(t).then(function(t){t.data.success&&(e.tableData=t.data.model,e.total=t.data.totalCount)}).catch(function(){})},close:function(e){this.isShowAddDialog=!this.isShowAddDialog,e&&this.initData()},queryBtnAct:function(){this.currentPage=1,this.initData()},addBtnAct:function(){this.rowData={},this.isShowAddDialog=!this.isShowAddDialog},deleteBtnAct:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteData(e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},deleteData:function(e){var t=this;this.$userAjax.deleteUserList({id:e.id}).then(function(e){e.data.success&&(t.$message({type:"success",message:"删除成功"}),t.endTime=t.$common.getCurrentTime(),t.initData())}).catch(function(){})},exportBtnAct:function(){},handleClick:function(e){console.log(e),this.isShowAddDialog=!this.isShowAddDialog,this.rowData=e},handleCurrentChange:function(e){console.log("页数发生变化：",e),this.currentPage=e,this.initData()},handleSizeChange:function(e){console.log("每页条数发生变化：",e),this.pageSize=e,this.initData()}},watch:{}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.mainScreenLoading,expression:"mainScreenLoading"}],staticClass:"AuthorityAccount",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("div",{staticClass:"titleBox"},[e._v("\n\t\t位置：\n\t\t"),a("span",[e._v("账号管理")])]),e._v(" "),a("div",{staticClass:"bodyBox"},[a("div",{staticClass:"topMenu flex-sbw",staticStyle:{"padding-bottom":"5px"}},[a("div",{staticClass:"flex-sbw-div"},[a("div",{staticClass:"flex-sbw"},[a("div",{staticClass:"flex-sbw-div topTitleTxt flex-sbw-item"},[a("span",[e._v("用户名：")]),e._v(" "),a("el-input",{attrs:{clearable:""},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),e._v(" "),a("div",{staticClass:"flex-sbw-div topTitleTxt flex-sbw-item"},[a("span",[e._v("运营商：")]),e._v(" "),a("el-select",{staticClass:"left-space time-interal",attrs:{clearable:"",placeholder:"运营商",size:"small"},model:{value:e.operator,callback:function(t){e.operator=t},expression:"operator"}},e._l(e.operatorOptions,function(e){return a("el-option",{key:e.operatorId,attrs:{label:e.operatorName,value:e.operatorId}})}),1)],1),e._v(" "),a("div",{staticClass:"flex-sbw-div topTitleTxt flex-sbw-item"},[a("span",{staticClass:"topTitleTxt"},[e._v("账户角色：")]),e._v(" "),a("el-select",{staticClass:"left-space time-interal",attrs:{clearable:"",placeholder:"账户角色：",size:"small"},model:{value:e.roleId,callback:function(t){e.roleId=t},expression:"roleId"}},e._l(e.accountRoleOptions,function(e){return a("el-option",{key:e.typeStr,attrs:{label:e.typeName,value:e.typeStr}})}),1)],1)])])]),e._v(" "),a("div",{staticClass:"topMenu",staticStyle:{"margin-bottom":"15px"}},[e.$store.state.home.AuthorizationID?a("el-button",{staticStyle:{margin:"0 10px"},attrs:{type:"primary"},on:{click:e.addBtnAct}},[e._v("新增")]):e._e(),e._v(" "),a("el-button",{staticStyle:{margin:"0 10px"},attrs:{type:"primary"},on:{click:e.queryBtnAct}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"tableBox"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",width:"55",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operatorName",width:"120",label:"运营商","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",width:"120",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loginId",width:"120",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"password",label:"密码","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleId",width:"80",label:"权限"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleDesc",label:"权限描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.transferRoleDesc(t.row)))]}}])}),e._v(" "),e.$store.state.home.AuthorizationID?a("el-table-column",{attrs:{prop:"totalFee",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteBtnAct(t.row)}}},[e._v("删除")])]}}],null,!1,1023211104)}):e._e()],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizeArr,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),e._v(" "),a("authority-account-add",{attrs:{isShow:e.isShowAddDialog,rowData:e.rowData},on:{onCancel:e.close}})],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(e){a("Y0rD"),a("2Ich")},"data-v-ff3aa1be",null);t.default=u.exports}});
//# sourceMappingURL=10.a3316efd9600318673b9.js.map